<div class="container-fluid">

    <div>

        <nb-card>

            <nb-card-header class="d-flex justify-content-between">
                {{headerValue}}
                <button nbButton status="success"size="medium" shape="semi-round" (click)="addMap()">Add</button>
            </nb-card-header>

            <nb-card-body>

                <div class="row">

                    <div class="col-12 col-md-5 list-container">

                        <div *ngFor="let productCustomer of ProductCutomerMaps" class="id-list" (click)="changeData(productCustomer)"
                        >
                            <p>ProductName  : {{productCustomer.ProductName}}</p>
                            <p>CustomerName : {{productCustomer.CustomerName}}</p>
                            <hr>
                        </div>

                    </div>

                    <div class="vertical col-1 d-none d-md-block"></div>

                    <div class="col-12 col-md-6 rowgap">

                        <div>
                            <form [formGroup]="productCustomerGroup" class="row row-wrap gap_col-3 gap_row-3">

                                <div class="col-12 col-sm-5 d-flex flex-column">
                                    <p><b>Product Name</b></p>

                                    <input
                                    formControlName="ProductName"
                                    nbInput
                                    type="text"
                                    shape="round"
                                    placeholder="ProductName"
                                    [nbAutocomplete]="productName" />
                              
                                  <nb-autocomplete #productName>
                              
                                    <nb-option *ngFor="let product of productsName" [value]="product">
                                      {{ product }}
                                    </nb-option>
                              
                                  </nb-autocomplete>


                                    <div>
                                        <span *ngIf="productCustomerGroup.get('ProductName')?.hasError('required') && productCustomerGroup.get('ProductName')?.touched">
                                            Product Name is required
                                        </span>
                                    </div>
                                </div>
    
                                <div class="col-12 col-sm-5 d-flex flex-column">
                                    <p><b>Customer Name</b></p>

                                    <input
                                    formControlName="CustomerName"
                                    nbInput
                                    type="text"
                                    shape="round"
                                    placeholder="Customer Name"
                                    [nbAutocomplete]="customerName" />
                              
                                  <nb-autocomplete #customerName>
                              
                                    <nb-option *ngFor="let customer of customersName" [value]="customer">
                                      {{ customer }}
                                    </nb-option>
                              
                                  </nb-autocomplete>


                                    <div>
                                        <span *ngIf="productCustomerGroup.get('CustomerName')?.hasError('required') && productCustomerGroup.get('CustomerName')?.touched">
                                            Customer Name is required
                                        </span>
                                    </div>
                                </div>
    
                            </form>
                        </div>

                        <div class="d-flex justify-content-end columngap p-5">
                            <button nbButton status="warning"size="medium" shape="semi-round" (click)="clear(btnValue)">Clear</button>
                            <button nbButton status="primary"size="medium" shape="semi-round" (click)="open(dialog, btnValue)">{{btnValue}}</button>
                        </div>

                    </div>

                </div>

            </nb-card-body>

        </nb-card>

    </div>

</div>


<ng-template #dialog let-ref="dialogRef">
    <nb-card>
      <nb-card-header>Are you sure</nb-card-header>
      <nb-card-body class="d-flex columngap pt-3">
        <button nbButton status="warning"size="medium" shape="semi-round" (click)="ref.close()">No</button>
        <button nbButton status="primary"size="medium" shape="semi-round" (click)="createOrUpdateproductCustomer(btnValue,ref)">Yes</button>
      </nb-card-body>
      <nb-card-footer>
        <!-- <button nbButton (click)="ref.close()">Close Dialog</button> -->
      </nb-card-footer>
    </nb-card>
  </ng-template>
  <!-- <button nbButton (click)="open(dialog)">Open Dialog</button> -->